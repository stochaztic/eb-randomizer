# Changelog
## v47.x / v48 (In progress)
- Music: Some custom tracks added and removed.
- PC sprites: Added SimEarth Lizard, Swellman, Jenn, and Ristar.

## v47 (2020-09-12)
- Challenges: New challenge mode "No gifts/store items, all enemy item drops from random pool".
- Gift box contents: Item ranking slightly adjusted.
- Music: Allow picking custom tracks to be used in Ancient Cave.
- Music: Many custom tracks added.
- PC sprites: Added Ness Pajamas, Prototype Ness, and Prototype Cheese Man.
### Bugfixes
- Enemy stats: Weaknesses and drop rates fixed.

## v46 (2020-04-19)
- Ancient Cave: Mr. Spoon in Fourside Museum is now a skip location, requiring a Signed banana. Signed banana added to pool of skip items.
- Ancient Cave: Pokey's Office and Pirkle's Office added.
- Enemy stats: Weaknesses and item drop rates much more likely to be changed.
- Music: Adjusted default floor track list.
### Bugfixes
- Music: Removed breaking track.

## v45 (2020-02-01)
- Ancient Cave: If you arrive at Giygas room without having named the player, the name the player dialogue will occur.
- Character stats: Add Don't Care name changes (flag c3).
- Game improvement patches: "Skip Naming" added.
- Music: Flag default is now w1.
- Music: Some tracks removed, some tracks added.
- Spoiler: Special Abilities and Music per floor for Ancient Cave added.
### Bugfixes
- Ancient Cave: Music won't change volume between doors.
- Backgrounds: Fix strange background effects.
- Music: Fixed w3+ bug on Firefox.
- Music: Removed empty track and non-music track.

## v44 (2019-12-24)
- Backgrounds: New flag level 2, color-shift backgrounds. Additionally, very eye-straining backgrounds should be less common at all flag levels.
- Game improvement patches: "Run button" changed to "Run mode"; default run speed and hold Y to slow to a walk.
- PC sprites: Added Nessa.
- Music: Custom music added.
### Bugfixes
- Ancient Cave: Benches no longer play restoration sound effect twice.
- Music: Remove "Teleport in" track from valid music options.

## v43 (2019-12-08)
- Challenges: New challenge modes "Long party member follow distance" and "Ancient Cave: Bubble Monkey in party".
- Dialogue: Additional Pokey lines.
- Enemy stats: More name parts added.
- Gift box contents, Shops: Item ranking improved, especially with Jeff-repair-associated items.
- PC sprites: New version of Bart.
### Bugfixes
- Ancient Cave: Chaos Theater show suppressed, again.
- Ancient Cave: Music at hotels will properly play tune and resume.
- Music: In Ancient Cave mode, music properly changes when passing through a Shiny Spot door.

## v42 (2019-07-27)
- Challenges: New set of flags with options to make your playthrough more challenging!
- Music: Music selection has been updated, and Ancient Cave music randomization will be much more consistent.
- Special: Added "speed" mode, accessible at the URL https://earthbound.app/?special=speed . This creates a ROM designed for a special speedrunning mode of the normal game, with only the five Game Improvement Patches turned on and no other changes. The title screen will be "RrrunBound".
### Bugfixes
- Ancient Cave: Enemies should correctly appear in the upper-right area of Threed. Note that the upper-left cemetery area is intentionally scaled to the floor that is within the door by the zombies, not to the rest of Threed.
- Ancient Cave: Chaos Theater show is no longer suppressed, and a few bugs with door transitions should no longer occur.
- PC sprites: Fixed Laika.

## v41 (2019-06-29)
- Character stats: Added shuffle of special abilities (Pray, Spy, Mirror). Mirror will have an increased chance of success and Spy will give more detailed information if this mode is activated.
### Bugfixes
- Music: Ancient Cave floor 9 will now have music.

## v40 (2019-06-09)
- Enemy stats: Battle palette randomization improved and moved to Palettes flag.
- Game improvement patches: Ludicrous speed patch now displays new speed names.
- Keysanity: Disabled due to softlocks. You can manually access this mode by adding `k` to your list of flags.
- Open: New primary mode, featuring all teleports (including bonus locations) unlocked, all phone numbers learned, and all key items in Escargo Express's inventory.
- Palettes: New feature with multiple levels.
- PC sprites: Added Chu.

## v39 (2019-05-25)
- Ancient Cave: All previously-disabled one-way doors are now enabled, and properly two-way. This will cause major routing changes.
- Ancient Cave: Loops may now appear within a floor.
- Dialogue: Additional Pokey lines.
- PC sprites: Added Dog (Laika).

## v38 (2019-05-10)
- Ancient Cave: Starstorm grant from Master Barf fight works like Auto-StarMaster. (If fought after using an Auto-Starmaster, fight will grant Omega; if use a Auto-Starmaster after fight, Auto-Starmaster will grant Omega.)
- Credits: EBSS AC 2019 winner Aurilliux added.
- PC sprites: Added Aya, Kris (Deltarune), Susie, Ralsei, and Lancer. More sprites for Dragons Jeff/Poo/Paula, Sonic, Amy, Tails, Knuckles, and Proto Man.
### Bugfixes
- Ancient Cave: Second Auto-StarMaster now correctly gives Starstorm Omega.
- Enemy stats: Unusual entries (Pokey, Magic Butterfly) removed from intershuffle (was causing weird data on other enemies)
- Gift box contents: In Ancient Cave, the Big League Bat, Platinum Band, and Diamond Band will no longer show up in excess of expected odds. (This makes other equipment slightly more likely to show up.)

## v37 (2019-03-01)
- Ancient Cave: Clumsy Robot added to list of potential Shiny Spot bosses.
- Enemy stats: Exploding-on-death-or-not has a small chance to be randomized.
- Music: Randomization added. Different effects for Ancient Cave mode vs other modes. Not on by default.
- PC sprites: Added Mega Man and The Batter.
### Bugfixes
- Ancient Cave: Awkward entrances and exits around Electro Specter's Shiny Spot have been made normal.
- Ancient Cave: Several Lost Underworld NPCs removed to prevent game crash.
- Dialogue: For clarity, NPCs that have interactions with items (pencil/eraser/rabbit statues, etc) will not have Talk To dialogue shuffled.
- Game improvement patches: Bug with Ludicrous Text Speed that occasionally caused PCs to be dead but still gain HP fixed (probably).

## v36 (2019-01-28)
- earthbound.app Website: Available custom sprites can be visually shown with animations.
- Ancient Cave: You are warned before engaging Belch without Fly Honey.
- Dialogue: Short Giygas Prayers feature moved to Game improvement patches.
- Dialogue: Additional Pokey lines and increased chance of custom Pokey lines.
- Game improvement patches: User interface improved to allow users to select any combination of patches.
- Game improvement patches: Added Goods Menu Equip patch.
- PC sprites: Added Kris and Tessie.
### Bugfixes
- Sprites that change palettes upon changing states will appear with appropriate colors (vanilla bug fixed).
- Game improvement patches: Added Goods Menu Equip patch that caused wrong item to be sold at stores fixed.

## v35 (2019-01-08)
- Ancient Cave: Dr Saturn room replaced by Brickroad's Head room in the guaranteed-full-heal-per-floor pool.
- Ancient Cave: Endgame script changes to make defeated robot sprite viewable.
- Enemy stats: Minor additions to the wordlists.
- Enemy stats: Enemies that normally begin with Cannot Concentrate will keep that status (balance issue).
- NPC sprites: Phones will only be replaced with other phones at flag level 1.
- PC sprites: Added Proto Man, Red, Blue, Generic Pokemon, Mole, and Mouse. More sprites for Dragon Ness.
### Bugfixes
- Happy Happy Village free stand will correctly give items even if Ness's inventory is full (vanilla bug fixed).
- Ancient Cave: Heiroglyph room softlock fixed.
- Ancient Cave: Magic Cake Lady softlock fixed.

## v34 (2018-12-18)
- Ancient Cave: Skip logic adjusted. Skips will now take you a moderate number of floors away, rather than none or an extreme amount.
- Ancient Cave: Spawn rate reduced in large, wide-open areas like towns and the desert.
- Ancient Cave: Ghost tunnel skips and Waterfall skip removed.
- PC sprites: Added Teddy, Dragonair, Gordon Freeman, Amy, Tails, and Knuckles. More sprites for Bart and Pride Ness. Additional vanilla options Ness, Paula, Jeff, and Poo.
- Dialogue: Additional Pokey lines.

## v33 (2018-12-16)
- PC sprites: New custom sprite system.
- Ancient Cave: Starting Cracked bat is auto-equipped.
### Bugfixes
- Ancient Cave: Bugfix to exit mouse behavior.
- Ancient Cave: Bugfix to prevent Pokey fight softlock in PRV.
- Ancient Cave: Occasional incorrect enemies appearing various places fixed.
- Ancient Cave: Entering Dungeon Man skip a second time after unlocking him fixed.
- Title screen: Fix glow on some configurations.

## v32 (2018-12-09)
- Ancient Cave: Exit mouse functionality changed. Now, he can mark a spot and then send you back to the marked spot later.
- Dialogue: Additional lines are available for randomization.
### Bugfixes
- Ancient Cave: Problematic rooms (Pokey's Monotoli Room, Snow Wood exit) removed.

## v31 (2018-12-06)
- earthbound.app Website: Your base ROM will be cached if possible so you no longer have to select it every time.
- Game improvement patches: An R-Button-Discard patch lets you use the R Button to discard the item most recently received from a chest, battle, or NPC.
- Gift box contents: In Ancient Cave, duplicate weapons, Ruler, Protractor, and Show ticket removed from item pool.
- Gift box contents, Shops: Item ranking improved, especially with Jeff-repair-associated items.
  - To balance Casey Bat being extremely easy to acquire, you can no longer get instant-wins if you have it equipped.
### Bugfixes
- Fresh Eggs, Chicks, and Chickens will no longer fail to transform/make noise (vanilla bug fixed).
- Ancient Cave: Doors for Scaraba Pyramid, Threed Hospital, and Topolla Theatre should behave better.
- Ancient Cave: Peaceful Rest Valley large area, Electro Specter cave, south Dalaam, and seaside Onett enemy spawns made more sensible.
- Ancient Cave: Problematic spawn plates at some exits removed.

## v30 (2018-11-17)
- Ancient Cave: 1.3x XP boost to enemies to reduce grinding time.
- Credits: Additional statistics displayed.
- Enemy stats: Giygas appearance randomized at earlier levels.
- PC sprites: Added new sprites to the mix, removed some confusing ones (ghost, invisible, diamondized).
- Rare seeds for established players may get special effects.
### Bugfixes
- Ancient Cave: Twoson Theatre girl never appears.
- Ancient Cave: Occasional incorrect enemies appearing various places fixed.

## v29 (2018-11-07)
- Website supports 'current' version in direct links. Using this is not recommended as flag definitions may change.
- Ancient Cave: Everdred, Arcade-Shark, and Cultists no longer appear, making non-skips clearer.
- Dialogue: Additional Pokey lines.
- Gift box contents: In Ancient Cave mode, item distribution is less linear.
### Bugfixes
- Ancient Cave: Sky Runner no longer activatable.
- Ancient Cave: Buses no longer usable.
- Ancient Cave: Enemy spawns no longer appear on top of doors, preventing a potential softlock.
- Dialogue: Options now correctly applied, fixing broken prayer scenes.

## v28 (2018-10-24)
- Dialogue: Option for Giygas prayers to be shortened and made random lines.
- Gift box contents: In Ancient Cave mode, Broken items will no longer appear in gift boxes.
- Ancient Cave: Guaranteed-free-heal room list now shuffled instead of static.
- Title screen: Changes always active.
### Bugfixes
- Ancient Cave: Game-over-glitch due to OSS flag fixed.
- Ancient Cave: Exit mouse no longer eats your ATM card or parts of Poo's name. Bad mouse!
- Ancient Cave: Exit mouse mom will only give you a child if you don't have one, including the starting one.

## v27 (2018-10-11)
- Ancient Cave: Hint Man tells you the floor you are on and the shiny spot bosses you will face.
- Dialogue: Title screen now actual words.

## v26 (2018-09-14)
- Ancient Cave: Scaraba Pyramid doors always open (routing change).
### Bugfixes
- Ancient Cave: Mom never blocks house door.
- Credits: Fixed mislabeled damage amounts.
- Gift box contents: Leave Carrot Key in normal mode.
- Keysanity: Item distribution bug fixed.
- Keysanity: Bug preventing Jeff leaving in Sky Runner fixed.

## v25 (2018-07-24)
- Character stats: Growth stats will have a slightly wider range and more diversity.
- Credits: Randomizer information displayed in all modes.
- Credits: Additional statistics displayed.
- Dialogue: Additional rare title screen randomization.
- Enemy stats: Bosses won't always have more difficult stats than vanilla.
### Bugfixes
- Ancient Cave: Battles/softlock at Onett police station back room prevented.
- Credits: Ness's level displayed correctly.
- Enemy stats: Ness's Nightmare odd name behavior fixed.
- Keysanity: Was completely broken, now completely fixed.

## v24 (2018-07-10)
- Credits: Statistics and randomizer information now displayed in Ancient Cave mode.
- Dialogue: Title screen changes.
- Enemy stats: Name suffixes added.

## v23 (2018-07-05)
- PSI abilities: New feature. By default, the levels PSI abilities are learned at is slightly randomized; optionally, you may randomize which abilities are learned by each character.
- Enemy stats: Minor additions to the wordlists.
### Bugfixes
- Enemy stats: Enemies will no longer change names/properties mid-battle.
- Ancient Cave: Missing North Onett roadblocks restored.
- Ancient Cave: Occasional incorrect enemies appearing various places fixed.

## v22 (2018-06-29)
- Ancient Cave: Each "level" of the cave will have at most one sanctuary (or Dr. Saturn or Throne Room spot), to more evenly distribute the free healing opportunities.
- Ancient Cave: Poo's Master now gives full heal.
### Bugfixes
- Gift box contents: Fix Ancient Cave item distribution bug causing duplicate weapons/gear.
- Ancient Cave: Teleport Men in Moonside fixed.
- Ancient Cave: Occasional incorrect enemies appearing around North Onett, Giant Step cave, Giant Step, and Entertainer's Shack fixed.

## v21 (2018-06-27)
- The website now displays a unique URL after seed creation.
- Going to one of these unique URLs will set up the randomizer to give you the exact same ROM.
- Game improvement patches: Ludicrous Speed patch for changing text speed added.
### Bugfixes
- Ancient Cave: Fixed exit mouse.
- Ancient Cave: Further logic errors that caused occasional incorrect enemies to appear in Electro Specter cave areas fixed.
- Ancient Cave: Logic errors that caused occasional incorrect enemies to appear in Onett around the arcade fixed.

## v20 (2018-06-15)
- Ancient Cave: Added Auto-StarMaster (Starstorm-granting item) to the item pool.

## v19 (2018-06-08)
- Enemy stats: New options for randomizing name and appearance, name on by default.
### Bugfixes
- Ancient Cave: Fixed exit mouse.
- Fixed incorrect spoiler output.

## v18 (2018-06-03)
- Ancient Cave: Reduced bias towards late-game shiny spot bosses.
### Bugfixes
- Fixed incorrect spoiler output. 

## v17 (2018-06-02)
- Complete rewrite and port of the randomizer and the framework to JavaScript and deployment at https://earthbound.app.
- Multiple new levels added to the different flags, and direct integration of the former cheatcodes into the normal levels of the flags.

## v16 (Unreleased)
- Ancient Cave: New spawn plate enemy group generation. (Experimental)
- Enemy stats: Friendly NPCs removed from stat intershuffle.
### Bugfixes
- Ancient Cave: Logic errors that caused occasional incorrect enemies to appear in Fourside fixed.
- Ancient Cave: Potential softlock from Frank-guarding Shark fixed.

## v15 (2018-05-19)
- Ancient Cave: DDD Mine dug out (fixes potential routing bug).
### Bugfixes
- Normal mode: Keysanity special fixes no longer applied.
- NPC sprites: Fixed glitches with Diamond-granting cutscene and post-Clumsy cutscene.
- Ancient Cave: Fixed bug involving status effects turned off and softlocks on scripted encounter death.

## v14 (2018-05-12)
- Ancient Cave: Credits roll at end of game (with random music, because why not).
### Bugfixes
- Keysanity: Ness's house lights now behave as normal.
- Ancient Cave: Further logic errors that caused occasional incorrect enemies to appear in Electro Specter cave areas fixed.

## v13 (2018-04-28)
- Gift box contents: Completely new item distribution algorithm for Ancient Cave mode.
- Ancient Cave: Moonside teleporters that go to gift box locations re-enabled. (You will not be teleported away from Moonside overworld.)
### Bugfixes
- Ancient Cave: Softlock causing events disabled: Captain Strong, Bubble Monkey, Sky Runner.
- Ancient Cave: Big Foot store will appear in Andonuts' lab.

## v12 (2018-04-21)
- PC sprites: New method of randomizing allows for much wider variety of sprites to appear.
### Bugfixes
- Ancient Cave: Logic errors that caused occasional incorrect enemies to appear in Electro Specter cave areas fixed.

## v11 (2018-04-10)
- Keysanity: Now features a PSI Teleport destination of North Onett. This allows access to north locations if you teleport before clearing certain flags.
- Keysanity: Suporma location added to distribution pool.
- Keysanity: Meteorite piece added to items pool (Suporma will not appear in pool).
### Bugfixes
- NPC sprites: Hang at Buzz Buzz will no longer occur.
- Keysanity: Venus will always give you her item.
- Keysanity: Pyramid can be accessed without fighting Kraken.

## v10 (2018-04-05)
- Keysanity: Now features a PSI Teleport destination of South Winters. This allows much easier routing and can actually avoid the Jeff-alone events now.
### Bugfixes
- Gift box contents: Dummy item named "Null" should no longer appear in randomized chests.
- Keysanity: Gerard Montague always appears outside of the mine, so you cannot get locked out of Diamond location.
- Keysanity: Mr Spoon can always request the autograph, so you cannot get locked out of Signed banana location.
- Keysanity: Bubble Monkey should always be available on the north shore after he runs off the first time.
- Keysanity: Various impossible item routings no longer will occur.

## v9 (2018-03-31)
- Keysanity mode added. Certain key items have been mixed up, but all teleports are available from the start of the game!
- Here are the item locations that have been shuffled in Keysanity mode (OUTDATED):
  - Franklin badge
  - Shyness book
  - King banana
  - Key to the shack
  - Hawk eye
  - Bicycle
  - Wad of bills
  - Diamond
  - Signed banana
  - Pencil eraser
  - Key to the tower
  - Town map
  - Carrot key
  - Tendakraut - but the Tendakraut has been transformed into a Jar of Fly Honey!
- Because there is a Jar of Fly Honey in the item pool, proceeding through Winters as Jeff is not required; however, if you choose to, the Bubble Monkey rope event has been patched to work even if you have extra companions.
- Keysanity mode is incompatible with Ancient Cave mode, and probably needs a lot of testing. Let me know if you encounter issues.

## v8 (2018-03-26)
- Non-essential dialogs shuffle with the 'd' flag (with special surprises possible at Pokey).
- Chests in non-AC mode have a 20% chance to have any non-key item.
- Use the code 'wildgifts' in your flags to make that chance 100%.
- Money chests in non-AC mode randomize to (low-cost) items.
- Chests that were not properly randomized in AC mode fixed: 
  - Tracy's room
  - Bracer of kings room
  - Cold remedy room (Giant Step)
  - Bag of dragonite room (Pyramid)
  - Magicant red area

## v7 (2018-03-21)
- Sanctuary Boss rooms in AC now always go front-to-back as they do in the base game.
- Non-Euclidian room layouts at Electro Specter no longer happen.
- Spoiler site at http://eb.compnode.net/ now displays chest locations and contents.
- Spoiler site at http://eb.compnode.net/ now displays boss locations and enemies.
- Odd-shaped PCs no longer appear in PC Sprite randomization by default due to graphical glitches.
- Use the code 'funsize' in your flags to get the odd-shaped PCs back.

## v6 (2018-03-19)
- Program now outputs a spoiler file in AC mode.
- Use this file at http://eb.compnode.net/ to view a map of doors and destinations. (More features coming soon.)

## v5 (2018-03-18)
- "Help" on ATM Card displays randomizer version info, seed, flags chosen.
- Mom's state set to heal you as normal.
- Phone in Ness's house no longer removes existing phone numbers.
- Non-gift-box NPCs no longer receive gift-box sprites.
- Chaos Theater show skipped if 'a' and 'p' flags selected due to panning bug.

## v4 (2018-03-09)
- Topolla Theater routing bug fixed.

## v3 (2018-03-09)
- NPC Sprite Swap and PC Sprite Swap flags added.
- Run button optional patch added.
- Enemy PP removed from intershuffle (fewer enemies will have no PP for their PP attacks).

## v2 (2018-03-05)
- Battle backgrounds randomized.
- Enemy battle sprite pallettes randomized.
- Hotels fixed.
- Phones in Winters locations enabled.
- Belch removed from Sanctuary Spot boss possibilities.

## v1 (2018-01-22)
- Praying at Giygas no longer softlocks.
- Exit Mice are now functional. They will take you back to the most recent Sanctuary Spot you visited, or home if you have not visited any.
- Sanctuary Spots are working now.
- Many items will now appear only once per dungeon, notably items that can only be equipped by one character.
- Many items that were unsellable/undroppable now can be.
- Added various protections against the enemy despawn bug.
- Ness starts with the Escargo Express phone number memorized.
- Sanctuary bosses now report their proper order.
- Some hotspots and other events have been modified, such as Poo leaving after the Pyramid.
- NPCs that start battles should never appear in the first zone.
- Various fixes to routing.